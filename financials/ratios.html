<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Financials — Ratios</title>
<link rel="stylesheet" href="../style.css" />
<style>
  .wrap{max-width:1000px;margin:90px auto 40px;padding:0 20px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}
  .card{background:var(--card);border:1px solid rgba(255,255,255,.1);border-radius:14px;padding:16px}
  .muted{color:var(--muted)}
  .big{font-size:28px;font-weight:700;margin:6px 0}
  .ok{color:#38d39f}.warn{color:#ffc74d}.bad{color:#ff6b6b}
</style>
</head>
<body class="dark">
<header class="site-wrap topbar" style="position:fixed;left:0;right:0;top:0">
  <a class="home" href="../index.html">⌂</a>
  <div class="links">
    <a href="./index.html">Overview</a>
    <a href="./statements.html">Statements</a>
    <a href="./ratios.html" style="border-bottom:1px solid currentColor">Ratios</a>
    <a href="./valuation.html">Valuation</a>
  </div>
</header>

<main class="wrap">
  <h1 id="title">Ratios</h1>
  <div class="grid" id="cards"></div>
</main>

<script>
const DB = {
  AAPL:{ name:"Apple Inc.", years:["2024","2023","2022","2021"],
    revenue:[383.3,383.3,394.3,365.8], opIncome:[114.3,114.3,119.4,108.9], netIncome:[97.0,97.0,99.8,94.7],
    assets:[352.5,352.8,352.8,351.0], equity:[74.1,62.2,50.7,63.1], cfo:[110.5,110.5,122.2,104.0], capex:[-10.5,-10.5,-12.1,-11.1]
  },
  MSFT:{ name:"Microsoft Corp.", years:["2024","2023","2022","2021"],
    revenue:[245.0,211.9,198.3,168.1], opIncome:[107.0,88.5,83.4,69.9], netIncome:[86.2,72.4,72.7,61.3],
    assets:[512.8,411.9,364.8,333.8], equity:[244.0,206.2,166.5,176.2], cfo:[121.0,87.6,89.0,76.7], capex:[-22.0,-24.8,-23.9,-22.7]
  }
};
const tk=(new URLSearchParams(location.search).get('t')||'AAPL').toUpperCase();
const d = DB[tk]||DB.AAPL;
document.getElementById('title').textContent = `${tk} — ${d.name}`;

function pct(x){return (x*100).toFixed(1)+'%'}
function tone(v, goodHigh=true){ if (goodHigh) return v>0.25?'ok':v>0.15?'warn':'bad'; else return v<1.8?'ok':v<2.5?'warn':'bad'; }

const i=0;
const opm = d.opIncome[i]/d.revenue[i];
const nm  = d.netIncome[i]/d.revenue[i];
const fcf = (d.cfo[i]+d.capex[i])/d.revenue[i];
const at  = d.revenue[i]/((d.assets[0]+d.assets[1])/2 || d.assets[0]);
const roe = d.netIncome[i]/((d.equity[0]+d.equity[1])/2 || d.equity[0]);
const lev = d.assets[i]/(d.equity[i]||0.1);

const cards = [
  {t:"Operating Margin", v:pct(opm), cls:tone(opm)},
  {t:"Net Margin", v:pct(nm), cls:tone(nm)},
  {t:"FCF Margin", v:pct(fcf), cls:tone(fcf)},
  {t:"Asset Turnover", v:(at).toFixed(2)+'×', cls:tone(at)},
  {t:"ROE", v:pct(roe), cls:tone(roe)},
  {t:"Leverage (A/E)", v:(lev).toFixed(2)+'×', cls:tone(lev,false)}
];
document.getElementById('cards').innerHTML = cards.map(c=>`
  <div class="card">
    <p class="muted">${c.t}</p>
    <div class="big ${c.cls}">${c.v}</div>
    <p class="muted">FY ${d.years[0]}</p>
  </div>`).join('');
</script>
</body>
</html>
